<!-- templates/dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Churn Prediction Dashboard</title>
    <!-- Include Socket.IO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
</head>
<body>
<h1>Customer Churn Prediction Dashboard</h1>

<form id="predictionForm">
    <!-- Add input fields for features -->
    <label>Feature 1:</label>
    <input type="text" name="feature1" required><br>

    <label>Feature 2:</label>
    <input type="text" name="feature2" required><br>

    <!-- Add more input fields for other features -->

    <input type="button" value="Predict" onclick="predict()">
</form>


<p id="predictionResult"></p>
<p id="errorResult"></p>

<script>
    // Establish a WebSocket connection
    var socket = io.connect('http://localhost:5000');

    // Handle prediction form submission
    function predict() {
        var form = document.getElementById('predictionForm');
        var formData = new FormData(form);

        // Send form data to Flask via WebSocket
        socket.emit('prediction_event', Object.fromEntries(formData));

        // Clear previous results
        document.getElementById('predictionResult').innerText = '';
        document.getElementById('errorResult').innerText = '';
    }

    // Handle prediction response from Flask
    socket.on('prediction_response', function (data) {
        if (data.prediction !== undefined) {
            // Update prediction result on the dashboard
            document.getElementById('predictionResult').innerText = 'Prediction: ' + data.prediction;
        } else if (data.error !== undefined) {
            // Update error message on the dashboard
            document.getElementById('errorResult').innerText = 'Error: ' + data.error;
        }
    });
</script>
</body>
</html>
